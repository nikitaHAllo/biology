# üß¨ Biology EGE Platform

üöÄ **Backend + Telegram Bot (TypeScript, Node.js, PostgreSQL, grammY)**  
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, –∫–≤–∏–∑–æ–≤ –∏ –∑–∞–¥–∞–Ω–∏–π 2-–π —á–∞—Å—Ç–∏ —Å —ç–∫–æ–Ω–æ–º–∏–∫–æ–π —Ä–µ–ø–∫–æ–∏–Ω–æ–≤ –∏ –∞–¥–º–∏–Ω-–æ—Ü–µ–Ω–∫–æ–π.

---

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **TypeScript**
- **Node.js / Express**
- **PostgreSQL**
- **grammY** (Telegram Bot API)
- **Vite / React (frontend, Mini App)**

---

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### üß© API
- –ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:
  - `/api/courses`, `/api/lessons`, `/api/tasks`, `/api/progress`, `/api/assignments`, `/api/admin`
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
- –†–∞—Å—à–∏—Ä–µ–Ω `/api/users` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `/:telegram_id/profile`
- –ù–æ–≤—ã–µ meta-—Ä–æ—É—Ç—ã:
  - `/api/meta/config` ‚Äî –∫–æ–Ω—Ñ–∏–≥ Mini App (`assignmentPrice`)
  - `/api/meta/bot` ‚Äî health-—á–µ–∫ –±–æ—Ç–∞

### ‚öôÔ∏è –°–µ—Ä–≤–∏—Å—ã (features)
- **users.service.ts** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª—å, –∫–æ—à–µ–ª—ë–∫ (—Ä–µ–ø–∫–æ–∏–Ω—ã)  
- **courses.service.ts** ‚Äî –∫—É—Ä—Å—ã –∏ —É—Ä–æ–∫–∏  
- **tasks.service.ts** ‚Äî –∑–∞–¥–∞–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥  
- **assignments.service.ts** ‚Äî –∑–∞–¥–∞–Ω–∏—è 2-–π —á–∞—Å—Ç–∏, –∑–∞—è–≤–∫–∏, —Å–ø–∏—Å–∞–Ω–∏–µ –º–æ–Ω–µ—Ç, —É—á—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`FOR UPDATE`), –∂—É—Ä–Ω–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π `wallet_transactions`

### üóÉÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã
- **`src/db/migrations/000_init.sql`** ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã:
- **–°–∏–¥—ã:**
- `001_seed_minimal.sql` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
- `002_seed_more.sql` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ä–æ–∫–∏ –∏ –∑–∞–¥–∞–Ω–∏—è

### ü§ñ Telegram-–±–æ—Ç (grammY, TypeScript)
- –ö–æ–º–∞–Ω–¥—ã:
- `/start` ‚Äî Mini App-–∫–Ω–æ–ø–∫–∞ (HTTPS) –∏–ª–∏ fallback-—Å—Å—ã–ª–∫–∞
- `/progress` ‚Äî –∫—Ä–∞—Ç–∫–∏–π —Å—Ç–∞—Ç—É—Å –∏ –±–∞–ª–∞–Ω—Å
- `/help` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- –ü—Ä–∏—ë–º `photo/document` —Å –ø–æ–¥–ø–∏—Å—å—é `assignment:<id>`:
- –∞–≤—Ç-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ —É—Ä–æ–∫–∞  
- —Å–ø–∏—Å–∞–Ω–∏–µ `ASSIGNMENT_PRICE`  
- —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ `ADMIN_CHAT_ID`
- –ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏ –∞–¥–º–∏–Ω–æ–º ‚Äî –±–æ—Ç —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã deeplink-–∫–Ω–æ–ø–∫–∏: *–û—Ç–∫—Ä—ã—Ç—å, –ö—É—Ä—Å—ã, –ü—Ä–æ–≥—Ä–µ—Å—Å, –ó–∞–¥–∞–Ω–∏—è 2-–π —á–∞—Å—Ç–∏*

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

`.env.example`:
```env
DATABASE_URL=postgres://postgres:postgres@localhost:5432/biology
BOT_TOKEN=<your_telegram_bot_token>
FRONTEND_URL=https://your-frontend-url
ADMIN_CHAT_ID=<your_admin_chat_id>
ASSIGNMENT_PRICE=10
